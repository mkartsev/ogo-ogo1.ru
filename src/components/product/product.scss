@import "./badges/badges.scss";
@import "./delivery/delivery.scss";
@import "./discount/discount.scss";
@import "./preview/preview.scss";
@import "./questions/questions.scss";
@import "./rating/rating.scss";
@import "./reviews/reviews.scss";
@import "./slider/slider.scss";

.product {
  &-available,
  &-notavailable {
    display: inline-flex;
    position: relative;
    padding-left: $spacer * 1.5;
    font-weight: 500;
    white-space: nowrap;
    &:before {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      width: 1rem;
      height: 1rem;
      transform: translateY(-50%);
    }
  }

  &-available {
    color: var(--success, $success);
    cursor: default;
    &:before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" xml:space="preserve" fill="%237CB342" width="16" height="16"><path d="M7 12.5c-.1 0-.2 0-.3-.1l-4.5-4c-.2-.2-.3-.5-.1-.7.2-.2.5-.2.7 0l4.1 3.7 6.2-7.6c.2-.2.5-.2.7-.1.2.2.2.5.1.7l-6.5 8c-.1 0-.2.1-.4.1z"/></svg>');
    }
  }

  &-notavailable {
    color: var(--gray-500, $gray-500);
    &:before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%239A9A9A" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.167a6.833 6.833 0 1 0 0 13.666A6.833 6.833 0 0 0 8 1.167ZM.167 8a7.833 7.833 0 1 1 15.666 0A7.833 7.833 0 0 1 .167 8Zm4.146-3.687a.5.5 0 0 1 .707 0L8 7.293l2.98-2.98a.5.5 0 0 1 .707.707L8.707 8l2.98 2.98a.5.5 0 0 1-.707.707L8 8.707l-2.98 2.98a.5.5 0 0 1-.707-.707L7.293 8l-2.98-2.98a.5.5 0 0 1 0-.707Z" clip-rule="evenodd"/></svg>');
    }
  }

  &-alternative {
    padding: $spacer;
    font-size: var(--font-size-root, $font-size-root);
    background: var(--secondary, $secondary);

    &__title {
      display: block;
      margin-bottom: $spacer;
      font-weight: 600;
    }

    &__link {
      display: block;
      position: relative;
      padding-left: 64px;
      min-height: 48px;
      color: var(--body-color);
      font-weight: 300;
      &:hover {
        color: var(--link-hover-color);
      }
    }

    &__image {
      position: absolute;
      top: 4px;
      left: 0;
      width: 48px;
      height: 48px;
    }

    &__price {
      display: flex;
      flex-flow: row nowrap;
      justify-content: flex-start;
      align-items: flex-end;
      gap: $spacer;
      margin-top: $spacer * 0.5;
      font-size: var(--font-size-lg, $font-size-lg);
      font-weight: 500;

      &-current {
      }
      &-new {
        color: var(--primary, $primary);
      }
      &-old {
        text-decoration: line-through;
        font-size: var(--font-size-sm, $font-size-sm);
      }
    }
  }

  &-icons {
    display: flex;
    flex-flow: column nowrap;
    gap: $spacer * 0.5;
    position: absolute;
    top: 0;
    right: 0;
    z-index: 2;
  }

  &-icon {
    display: inline-flex;
    flex-flow: row nowrap;
    justify-content: center;
    align-items: center;
    width: 36px;
    height: 36px;
    font-size: var(--font-size-sm, $font-size-sm);
    border-radius: 50%;
    background-repeat: no-repeat;
    background-position: center;
    background-color: var(--primary, $primary);
    background-size: 24px;
    overflow: hidden;
    &--digital {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23ffffff" viewBox="0 0 24 24" width="24" height="24"><path d="M19.8 4.3H4.2C2.7 4.3 1.5 5.5 1.5 7v10c0 1.5 1.2 2.7 2.7 2.7h15.6c1.5 0 2.7-1.2 2.7-2.7V7c0-1.5-1.2-2.7-2.7-2.7zm-15.6 1h15.6c1 0 1.7.8 1.7 1.7v1.7h-19V7c0-.9.8-1.7 1.7-1.7zm15.6 13.4H4.2c-.9 0-1.7-.8-1.7-1.7V9.7h19V17c0 1-.8 1.7-1.7 1.7z"/><path d="M10.4 14.3h-4c-.3 0-.5.2-.5.5s.2.5.5.5h4c.3 0 .5-.2.5-.5s-.2-.5-.5-.5z"/></svg>');
    }
    &--discount {
      color: var(--body-color, $body-color);
      background-color: var(--warning, $warning);
    }
    &--gaming {
      background-size: 100%;
      background-image: url("../img/icons/icon-gaming.png");
    }
    &--express {
      background-image: url("../img/icons/icon-express.svg");
    }
    &--delivery {
      background-image: url("../img/icons/icon-delivery.svg");
    }
    &--gift {
      background-image: url("../img/icons/icon-gift.svg");
    }
  }

  &-guarantee {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: $spacer * 0.5;
  }

  &-variants {
    &__list {
      display: flex;
      flex-flow: row wrap;
      justify-content: flex-start;
      align-items: center;
      gap: $spacer * 0.5;
    }

    &__item {
      display: inline-flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      position: relative;
      flex: 0 1 60px;
      min-height: 38px;
      max-height: 60px;
      padding: 5px;
      color: var(--body-color, $body-color);
      font-weight: 300;
      font-size: 0.75rem;
      line-height: 1.125rem;
      text-align: center;
      text-decoration: none;
      border: 1px solid var(--light, $light);
      overflow: hidden;

      &:hover {
        border-color: var(--info, $info);
      }

      &.is-active {
        border-width: 2px;
        border-color: var(--info, $info);
      }

      &.not-avail {
        border-style: dashed;
        .product-variants__image {
          opacity: 0.5;
        }
      }
    }

    &__image {
      max-width: 100%;
      max-height: 100%;
    }
  }

  &-label {
    position: absolute;
    width: 72px;
    top: 31px;
    left: 31px;
    color: var(--white, $white);
    font-weight: 600;
    font-size: var(--font-size-xs, $font-size-xs);
    text-align: center;
    background-color: var(--primary, $primary);
    transform: translate(-50%, -50%) rotate(-45deg);
    z-index: 2;

    &:before {
      content: "";
      display: block;
      pointer-events: none;
      position: absolute;
      z-index: -1;
      bottom: 0;
      left: -17px;
      right: -17px;
      height: 0;
      border-bottom: 18px solid var(--primary, $primary);
      border-left: 18px solid transparent;
      border-right: 18px solid transparent;
    }

    &--hit {
      background-color: var(--orange, $orange);
      &:before {
        border-bottom-color: var(--orange, $orange);
      }
    }

    &--new:before {
      border-bottom-color: var(--primary, $primary);
    }
  }
}

.product-page {
  &__artikul {
    margin-left: auto;
    font-size: var(--font-size-sm, $font-size-sm);
    font-weight: 300;
  }

  &__bonus {
    display: flex;
    flex: 0 0 auto;
    flex-flow: row nowrap;
    justify-content: flex-start;
    align-items: center;
    gap: $spacer * 0.5;
    font-size: var(--font-size-sm, $font-size-sm);
    color: var(--info, $info);
    line-height: 1;
    white-space: nowrap;
  }

  &__controls {
    display: flex;
    flex-flow: row nowrap;
    justify-content: flex-start;
    align-items: center;
  }

  &__detail {
    display: flex;
    flex-flow: column nowrap;
    gap: $spacer;
    padding: $spacer 0;
    border-top: 1px solid var(--light, $light);
    border-bottom: 1px solid var(--light, $light);
  }

  &__header {
    display: flex;
    flex-flow: row wrap;
    justify-content: flex-start;
    padding: 0 0 $spacer 0;
    gap: $spacer;
  }

  &__info {
    display: flex;
    flex-flow: column nowrap;
    gap: $spacer;
  }

  &__options {
    display: flex;
    flex-flow: column nowrap;
    gap: $spacer;
    font-size: var(--font-size-sm, $font-size-sm);
  }

  &__photo {
  }

  &__price-wrapper {
    display: flex;
    flex-flow: column nowrap;
    align-items: flex-start;
    gap: $spacer;
    padding: $spacer;

    background: var(--gray-100, $gray-100);
  }

  &__price {
    display: flex;
    flex-flow: row wrap;
    align-items: flex-end;
    gap: $spacer;
    font-size: $h1-font-size;

    &-badge {
      --badge-padding-x: 0.5rem;
      --badge-padding-y: 0.25rem;
      --badge-border-radius: 2px;
      --badge-font-size: var(--font-size-sm, $font-size-sm);
      white-space: normal;
    }

    &-current {
      flex: 0 0 auto;
      color: var(--body-color, $body-color);
      font-weight: 400;
      line-height: 1;
      white-space: nowrap;
    }
    &-new {
      color: var(--danger, $danger);
      font-weight: 400;
      line-height: 1;
      white-space: nowrap;
    }
    &-old {
      color: var(--body-color, $body-color);
      font-size: $h4-font-size;
      font-weight: 400;
      text-decoration: line-through;
      line-height: 1;
      white-space: nowrap;
    }
    &-note {
      display: inline-flex;
      flex-flow: row wrap;
      justify-content: flex-start;
      align-items: center;
      gap: $spacer * 0.5;
      font-size: var(--font-size-sm, $font-size-sm);
      line-height: 1;
    }
    // &-tax {
    //   // flex: 1 0 100%;
    //   font-size: var(--font-size-sm, $font-size-sm);
    //   line-height: 1;
    // }
  }

  &__rating {
    display: flex;
    flex-flow: row nowrap;
    justify-content: flex-start;
    align-items: center;
    gap: $spacer;

    &-text {
      font-size: var(--font-size-root);
      font-weight: 500;
      border-bottom: 1px dashed transparent;
    }

    &:hover {
      cursor: pointer;
      .product-page__rating-text {
        border-bottom-color: var(--primary, $primary);
      }
    }
  }

  @include media-breakpoint-up(sm) {
    &__price-badge {
      white-space: nowrap;
    }
  }
  @include media-breakpoint-up(lg) {
    &__detail {
      flex-flow: row wrap;
      gap: $spacer;
    }

    &__photo {
      flex: 0 0 50%;
      max-width: 50%;
    }

    &__options {
      flex: 0 0 calc(50% - $spacer);
    }

    &__info {
      flex: 0 0 100%;
    }
  }

  @include media-breakpoint-up(xl) {
    &__controls {
      justify-content: space-between;
    }
    &__detail {
      flex-wrap: nowrap;
    }
    &__photo {
      flex: 3 3 42%;
      max-width: 488px;
    }

    &__options {
      flex: 2 2 330px;
      min-width: 330px;
    }

    &__info {
      flex: 2 2 350px;
      min-width: 350px;
    }
  }
}
